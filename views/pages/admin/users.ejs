<%- include('../../partials/header') %>
<section class="container pt-5">
  <div class="row">
    <!-- Sidebar (User info + Account menu) -->
    <aside class="col-lg-3 col-md-4 border-end pb-5 mt-n5">
      <div class="position-sticky top-0">
        <div class="text-center pt-5">
          <div class="d-table position-relative mx-auto mt-2 mt-lg-4 pt-5 mb-3">
            <img
              src="img/avatar/18.jpg"
              class="d-block rounded-circle"
              width="120"
              alt="John Doe"
            />
            <button
              type="button"
              class="btn btn-icon btn-light bg-white btn-sm border rounded-circle shadow-sm position-absolute bottom-0 end-0 mt-4"
              data-bs-toggle="tooltip"
              data-bs-placement="bottom"
              title="Change picture"
            >
              <i class="bx bx-refresh"></i>
            </button>
          </div>
          <h2 class="h5 mb-1">Admin</h2>
          <button
            type="button"
            class="btn btn-secondary w-100 d-md-none mt-n2 mb-3"
            data-bs-toggle="collapse"
            data-bs-target="#account-menu"
          >
            <i class="bx bxs-user-detail fs-xl me-2"></i>
            Account menu
            <i class="bx bx-chevron-down fs-lg ms-1"></i>
          </button>
          <div
            id="account-menu"
            class="list-group list-group-flush collapse d-md-block"
          >
            <a
              href="/admin-account"
              class="list-group-item list-group-item-action d-flex align-items-center"
            >
              <i class="bx bx-cog fs-xl opacity-60 me-2"></i>
              Détails du compte
            </a>
            <a
              href="/users-list"
              class="list-group-item list-group-item-action d-flex align-items-center active"
            >
              <i class="bx bx-user fs-xl opacity-60 me-2"></i>
              Utilisateurs
            </a>
            <a
              href="/specialites"
              class="list-group-item list-group-item-action d-flex align-items-center"
            >
              <i class="bx bx-category-alt fs-xl opacity-60 me-2"></i>
              Specialites
            </a>
            <a
              href="/logout"
              class="list-group-item list-group-item-action d-flex align-items-center"
            >
              <i class="bx bx-log-out fs-xl opacity-60 me-2"></i>
              Se déconnecter
            </a>
          </div>
        </div>
      </div>
    </aside>

    <!-- Account details -->
    <div class="col-md-8 offset-lg-1 pb-5 mb-2 mb-lg-4 pt-md-5 mt-n3 mt-md-0">
      <div class="ps-md-3 ps-lg-0 mt-md-2 py-md-4">
        <h1 class="h2 pt-xl-1 pb-3">List d'Utilisateurs</h1>

        <!-- Basic info -->
        <h2 class="h5 text-primary mb-4">Docteurs</h2> 
        <h3 class="h6 text mb-4">Ajouter nouveaux docteurs <a href="/add-doctors"><i class='bx bx-plus-circle'></i></a></h3>        
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>ID Docteur</th>
                <th>Nom et prénom</th>
                <th>Téléphone</th>
                <th>Adresse E-mail</th>
                <th>Specialite</th>
                <th>Adresse</th>
                <th>Acceptation</th>
              </tr>
            </thead>
            <tbody>
              <% if(data.length){ for(var i = 0; i< data.length; i++) {%>
                <% if(data[i].Role == "Doctor"){ %>
              <tr>
                <td><%= data[i].doctor_id%></td>
                <td><%= data[i].name%></td>
                <td><%= data[i].phone%></td>
                <td><%= data[i].email%></td>
                <td><%= data[i].specialite%></td>
                <td><%= data[i].address%></td>
                <td><% if (data[i].Accepte == true) { %>
                  <a href="/block/<%= data[i].id%>" class="btn btn-danger">Refuser</a>
               <%   } else {%>
                <a href="/accept/<%= data[i].id%>" class="btn btn-success">Accepter</a>
                <% } %> </td>
              </tr>
              <% } %> 
              <% } }else{ %>
              <tr>
                <td colspan="3">No user</td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
        <!-- Basic info -->
        <h2 class="h5 text-primary mb-4">Clients</h2>
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>Nom et prénom</th>
                <th>Téléphone</th>
                <th>Adresse E-mail</th>
                
                <th>Adresse</th>
              </tr>
            </thead>
            <tbody>
              <% if(data.length){ for(var i = 0; i< data.length; i++) {%>
                <% if(data[i].Role == "Client"){ %>
              <tr>
                <td><%= data[i].name%></td>
                <td><%= data[i].phone%></td>
                <td><%= data[i].email%></td>
                <td><%= data[i].address%></td>
              </tr>
              <% } %> 
              <% } }else{ %>
              <tr>
                <td colspan="3">No user</td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>

<%- include('../../partials/footer') %>
